<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gallery</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .mosaic {
            max-width: 1200px;
            margin: 0 auto;
        }
        .jQueryMosaic {
            width: 100%;
            float: left;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
            overflow: hidden;
        }
        .jQueryMosaic > div,
        .jQueryMosaic > a,
        .jQueryMosaic > img,
        .jQueryMosaic > video {
            float: left;
            max-width: 100%;
            height: auto;
        }
        .jQueryMosaic > .item {
            position: relative;
        }
        .jQueryMosaic > .item.withImage {
            background-size: cover;
        }
        img {
            display: block;
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>
    <div id="gallery" class="mosaic"></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="jquery.mosaic.js"></script>
    <script src="images.js"></script>
    
    <script>
        $(document).ready(function() {
            // Create image elements
            const gallery = $('#gallery');
            images.forEach(imagePath => {
                const img = $('<img>')
                    .attr('src', imagePath)
                    .attr('alt', 'Gallery Image')
                    .appendTo(gallery);
            });

            // Initialize mosaic after images are loaded
            let loadedImages = 0;
            const totalImages = images.length;

            gallery.find('img').on('load', function() {
                loadedImages++;
                if (loadedImages === totalImages) {
                    initMosaic();
                }
            }).on('error', function() {
                loadedImages++;
                $(this).remove();
                if (loadedImages === totalImages) {
                    initMosaic();
                }
            });

            function initMosaic() {
                gallery.Mosaic({
                    maxRowHeight: 400,
                    innerGap: 10,
                    maxRowHeightPolicy: 'tail',
                    responsiveWidthThreshold: 500,
                    refitOnResize: true
                });
            }

            // Handle window resize
            let resizeTimer;
            $(window).on('resize', function() {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(function() {
                    gallery.Mosaic('fit');
                }, 250);
            });
        });
    </script>
</body>
</html>
